<!DOCTYPE html>

<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div class="col-sm-12">
            <div class="page-header">
                <h1 class="color-full-api">
                    Full API
                </h1>
            </div><!-- /.page-header -->

            <h1 id="cc_introduction" class="header block lighter color-full-api blue">Introduction</h1>
            <p>
                This document covers the basic concepts of the payment transaction types and the
                technical details of the AstroPay - Credit Card API. It contains functional examples of the
                requests and important observations to be taken into account during integration.
            </p>


            <!-- Considerations-->
            <div id="considerations-container">

            </div>

            <h1 class="header block lighter color-cashout-card blue">Environments</h1>
            <p>
                Your account is associated with two different environments: Sandbox and Live. <br>
            <h2  class="header block lighter" id="cc_urls">URLs, credentials & account configuration</h2>
            <p>
                Base URL for communication:
            </p>

            <h3 class="block lighter">Sandbox</h3>
            Test environment available for integration development and testing which simulates the requests and transactions available in the platform. On test environment no transactions will actually be processed.
            <p>                
                <i class="ace-icon fa fa-globe bigger-125 color-cashout-card"></i>
                <a  class="btn btn-link"> https://sandbox.astropaycard.com/api_curl/cc/ </a>
                (for transaction functions)
            </p>
            <p>                
                <i class="ace-icon fa fa-globe bigger-125 color-cashout-card"></i>
                <a  class="btn btn-link"> https://sandbox.astropaycard.com/api_curl/query/ </a>
                (for status functions)
            </p>

            <h3 class="block lighter">Live</h3>
            Production environment
            <p>                
                <i class="ace-icon fa fa-globe bigger-125 color-cashout-card"></i>
                <a  class="btn btn-link"> https://astropaycard.com/api_curl/cc/ </a>
                (for transaction functions)
            </p>
            <p>                
                <i class="ace-icon fa fa-globe bigger-125 color-cashout-card"></i>
                <a  class="btn btn-link"> https://astropaycard.com/api_curl/query/ </a>
                (for status functions)
            </p>

            <div class="well">
                <h4 class="red smaller lighter"><i class="ace-icon fa fa-pencil"></i> Note</h4>
                You will find your credentials in the panel: "Integration -> Credentials & Settings". Notice that credentials are different between Both environments.
                <br>
            </div>
            <div class="well">
                <h4 class="red smaller lighter"><i class="ace-icon fa fa-pencil"></i> Note</h4>
                Once the integration is finished and tested, fill your account details in the panel: "Settings -> Merchant Account" and <b>"Request to go live"</b>. Your live credentials will be available when Merchant's account is in Live mode.  
                <br>
            </div>



            <!-- save -->
            <div id="cc_save">
                <h1 class="header block lighter color-full-api blue">Recurrent payments. Function: Save</h1>
                <p>
                    The Save Card function allows the Merchant to securely store the customer's credit card
                    information for future or recurrent purchases. It checks if the credit card used is valid and creates a
                    preapproval that allows the Merchant to debit automatically from the user credit card.<br>
                    The Merchant receives a unique token that could be used when sending a sale transactions.<br>
                    Also, Merchant can make a sale transaction by sending all credit card information again but whithout CVV.
                </p>
                <p>
                    POST:
                    <br>
                    <i class="ace-icon fa fa-globe bigger-125 color-full-api"></i>
                    https://astropaycard.com/api_curl/cc/save
                </p>
                <h2 id="cc_request" class=" block lighter"> Request </h2>
                <h3 class="block lighter"> Mandatory parameters </h3>
                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Format</th>
                            <th>Description</th>
                            <th>Example </th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>x_login</td>
                            <td>String (length: 32 chars)</td>
                            <td>Your merchant ID in Astropay</td>
                            <td>AsGsd35Grf</td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>
                        <tr>
                            <td>x_trans_key</td>
                            <td>String (length: 32 chars)</td>
                            <td>Your merchant password in Astropay</td>
                            <td>D23weF2f4g</td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>
                        <tr>
                            <td>x_version</td>
                            <td>String (Format: X.Y)</td>
                            <td>API version</td>
                            <td>4.0</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_country</td>
                            <td>String (max. length: 2 chars)</td>
                            <td>User’s country. ISO 3166-1 alpha-2 codes</td>
                            <td>BR</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_description</td>
                            <td>String (max. length: 200 chars)</td>
                            <td>A description about your service</td>
                            <td>Sony</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_cpf</td>
                            <td>Number (max. 30 digits)</td>
                            <td>User’s personal identification
                                number:
                                CPF or CNPJ for Brazil, DNI for
                                Argentina and ID for other
                                countries.</td>
                            <td>123456789</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_name</td>
                            <td>String</td>
                            <td>User’s full name.</td>
                            <td>Ivan Lolivier</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_email</td>
                            <td>String</td>
                            <td>User’s email address.</td>
                            <td>santiago@astropay.com</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_bank</td>
                            <td>String (max. 3 digits)</td>
                            <td>Payment method code. See <a href="#cc_pm_codes">payment method codes</a></td>
                            <td>VI</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>cc_number</td>
                            <td>Number (16 digits)</td>
                            <td>User's credit card number</td>
                            <td>4111111111111111</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>cc_exp_month</td>
                            <td>Number (2 digits)</td>
                            <td>Credit card expiration month</td>
                            <td>02</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>cc_exp_year</td>
                            <td>Number (4 digits)</td>
                            <td>Credit card expiration year</td>
                            <td>2018</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>cc_cvv</td>
                            <td>Number (max length: 4 digits)</td>
                            <td>Credit card verification value</td>
                            <td>425</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>cc_issuer</td>
                            <td>Number</td>
                            <td>Credit card issuer bank (Mandatory only for Mexico). See <a href="#cc_issuer_banks">issuer bank codes</a></td>
                            <td>105</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_device_id</td>
                            <td>String</td>
                            <td>Buyer's device Id. See <a href="#cc_x_device_id">Device id</a></td>
                            <td>54hj4h5jh46hasjd</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>control</td>
                            <td>String</td>
                            <td>Control string</td>
                            <td>JASG44DNNGIJ34IJ34OKOEWJNCV874Y4UY</td>
                            <td><span class="badge badge-danger background-color-full-api">2</span></td>
                        </tr>

                    </tbody>
                </table>

                <p>
                    <span class="badge badge-danger background-color-full-api">1</span>
                    x_login and x_trans_key are your credentials. Remember to find them in the panel, section Integration -> Credentials & Settings.
                </p>
                <p>
                    <span class="badge badge-danger background-color-full-api">2</span>
                    Control string
                </p>
                <ul>
                    <li>
                        $secretkey – secret key given to the merchant
                    </li>
                    <li>
                        $email– user’s email address (x_email)
                    </li>
                    <li>
                        $number–credit card number (cc_number)
                    </li>
                    <li>
                        $cvv–credit card cvv (cc_cvv)
                    </li>
                    <li>
                        $month – credit card expiration month (cc_exp_month)
                    </li>
                    <li>
                        $year – credit card expiration year (cc_exp_year)
                    </li>
                    <li>
                        $cpf – user’s document (x_cpf)
                    </li>
                    <li>
                        $country – country code (x_country)
                    </li>
                </ul>


                <div>
                    <div class="alert alert-info">
                        $message = $email.$number.$month.$cvv.$year.$cpf.$country;<br>
                        $control = strtoupper(hash_hmac('sha256', pack('A*', $message), pack('A*',$secretkey)));
                    </div>
                </div>

                <h3 class="block lighter"> Optional parameters </h3>

                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Format</th>
                            <th>Description</th>
                            <th>Example </th>
                            <th>Default</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>
                            <td>x_iduser</td>
                            <td>Decimal (max. 20 chars)</td>
                            <td>Unique user id at the merchant side</td>
                            <td>user 123</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_bdate</td>
                            <td>String</td>
                            <td>User’s date of birth (Format: YYYYMMDD)</td>
                            <td>19850812</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_ip</td>
                            <td>String</td>
                            <td>Buyer's IP address</td>
                            <td>200.11.222.3</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_address</td>
                            <td>String</td>
                            <td>User’s address</td>
                            <td>1225 Bonavita St.</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_zip</td>
                            <td>String</td>
                            <td>User’s zip/postal code</td>
                            <td>11300</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_city</td>
                            <td>String</td>
                            <td>User’s city</td>
                            <td>Sao Paulo</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_state</td>
                            <td>String</td>
                            <td>User’s state. Brazilian 2 letter format</td>
                            <td>MO</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_phone</td>
                            <td>String</td>
                            <td>User’s phone number</td>
                            <td>099123456</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_merchant_id</td>
                            <td>String</td>
                            <td>Sub merchant identifier (only
                                for PSPs). List of sub-
                                merchants must be provided by
                                PSP</td>
                            <td>1</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>


                <h2 id="cc_response" class=" block lighter">Response</h2>
                <div id="response"></div>
                This function, if successful, returns a json with the following parameters:
                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Description</th>
                            <th></th>
                    </thead>

                    <tbody>
                        <tr>
                            <td>status</td>
                            <td>OK</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>desc</td>
                            <td>Response description message</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>control</td>
                            <td>Control string</td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>

                        <tr>
                            <td>result</td>
                            <td>Transaction result. See <a href="#cc_results">possible results</a></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>cc_token</td>
                            <td>The token associated with the customer card.
                                This information should be stored for future uses.</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <span class="badge badge-danger background-color-full-api">1</span>
                Control signature
                <ul>
                    <li>
                        $secretkey – secret key given to the merchant
                    </li>
                    <li>
                        $token – credit card token (cc_token)
                    </li>
                </ul>    

                <div class="alert alert-info">
                    $message = $token; <br>
                    $control = strtoupper(hash_hmac('sha256', pack('A*', $message), pack('A*',$secretkey)));
                </div>



            </div>
            <!-- save -->


            <!--Sale-->
            <div id="cc_sale">
                <h1 class="header block lighter color-full-api blue">Function: Sale</h1>
                <p>
                    This function performs a one-shot or recurrent payment.
                </p>
                Recurrent payments has two options: 
                <ul>
                    <li>Send the token obtained in save function.</li>
                    <li>Send card data without cvv (Recurrent without token).</li>
                </ul>
                <p>
                    A Sale transaction checks if the card holder has sufficient funds for that purchase and if the
                    transaction has passed the Acquirer's and Bank's risk assessment process, and if approved,
                    the transaction is completed.
                </p>
                <p>
                    POST:
                    <br>
                    <i class="ace-icon fa fa-globe bigger-125 color-full-api"></i>
                    https://astropaycard.com/api_curl/cc/sale
                </p>
                <h2 id="cc_request" class=" block lighter"> Request </h2>
                <h3 class="block lighter"> Mandatory parameters </h3>
                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Format</th>
                            <th>Description</th>
                            <th>One-Shot / Recurrent</th>
                            <th>Example </th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>x_login</td>
                            <td>String (length: 32 chars)</td>
                            <td>Your merchant ID in Astropay</td>
                            <td>Both</td>
                            <td>AsGsd35Grf</td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>

                        <tr>
                            <td>x_trans_key</td>
                            <td>String (length: 32 chars)</td>
                            <td>Your merchant password in Astropay</td>
                            <td>Both</td>
                            <td>D23weF2f4g</td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>
                        <tr>
                            <td>x_version</td>
                            <td>String (Format: X.Y)</td>
                            <td>API version</td>
                            <td>Both</td>
                            <td>4.0</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_invoice</td>
                            <td>String (max. lenght 200 chars)</td>
                            <td>Unique transaction
                                identification at the merchant
                                site.</td>
                            <td>Both</td>
                            <td>Invoice1234</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_amount</td>
                            <td>Decimal (max. 2 decimal numbers)</td>
                            <td>Transaction amount (in the
                                currency entered in the field
                                “x_currency”)</td>
                            <td>Both</td>
                            <td>100.95</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_currency</td>
                            <td>String (length: 3 chars)</td>
                            <td>Currency code</td>
                            <td>Both</td>
                            <td>BRL</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_description</td>
                            <td>String (max. length: 200 chars)</td>
                            <td>A description of the payment</td>
                            <td>Both</td>
                            <td>Product 123</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_device_id</td>
                            <td>String</td>
                            <td>Buyer's device Id. See <a href="#cc_x_device_id">Device id</a></td>
                            <td>Both</td>
                            <td>54hj4h5jh46hasjd</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_country</td>
                            <td>String (max. length: 2 chars)</td>
                            <td>User’s country. in ISO 3166-1 alpha-2 codes</td>
                            <td>One-Shot / Recurrent without token</td>
                            <td>BR</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_cpf</td>
                            <td>Number (max. 30 digits)</td>
                            <td>User’s personal identification
                                number:
                                CPF or CNPJ for Brazil, DNI for
                                Argentina and ID for other
                                countries.</td>
                            <td>One-Shot</td>
                            <td>123456789</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_name</td>
                            <td>String</td>
                            <td>User’s full name.</td>
                            <td>One-Shot</td>
                            <td>Ivan Lolivier</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_email</td>
                            <td>String</td>
                            <td>User’s email address.</td>
                            <td>One-Shot</td>
                            <td>santiago@astropay.com</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_bank</td>
                            <td>String (max. 3 digits)</td>
                            <td>Payment method code. See <a href="#cc_pm_codes">payment method codes</a></td>
                            <td>One-Shot / Recurrent without token (only Mexico)</td>
                            <td>VI</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>cc_number</td>
                            <td>Number (16 digits)</td>
                            <td>User's credit card number</td>
                            <td>One-Shot / Recurrent without token</td>
                            <td>4111111111111111</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>cc_exp_month</td>
                            <td>Number (2 digits)</td>
                            <td>Credit card expiration month</td>
                            <td>One-Shot / Recurrent without token</td>
                            <td>02</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>cc_exp_year</td>
                            <td>Number (4 digits)</td>
                            <td>Credit card expiration year</td>
                            <td>One-Shot / Recurrent without token</td>
                            <td>2018</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>cc_cvv</td>
                            <td>Number (max length: 4 digits)</td>
                            <td>Credit card verification value</td>
                            <td>One-shot</td>
                            <td>425</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>cc_issuer</td>
                            <td>Number</td>
                            <td>Credit card issuer bank (Mandatory only for Mexico). See <a href="#cc_issuer_banks">issuer bank codes</a></td>
                            <td>One-Shot / Recurrent without token</td>
                            <td>105</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>cc_token</td>
                            <td>String</td>
                            <td>Token obtained in Save function</td>
                            <td>Recurrent</td>
                            <td>1aj2l3g4gj4fh5d5hh6d605</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>control</td>
                            <td>String</td>
                            <td>Control string</td>
                            <td>Both</td>
                            <td>JASG44DNNGIJ34IJ34OKOEWJNCV874Y4UY</td>
                            <td><span class="badge badge-danger background-color-full-api">2</span></td>
                        </tr>

                    </tbody>
                </table>

                <p>
                    <span class="badge badge-danger background-color-full-api">1</span>
                    x_login and x_trans_key are your credentials. Remember to find them in the panel, section Integration -> Credentials & Settings.
                </p>
                <p>
                    <span class="badge badge-danger background-color-full-api">2</span>
                    Control string
                </p>
                <ul>
                    <li>
                        $secretkey – secret key given to the merchant
                    </li>
                    <li>
                        $invoice– unique transaction ID at merchant (x_invoice)
                    </li>
                    <li>
                        $amount–payment amount (x_amount)
                    </li>
                    <li>
                        $currency–payment currency (x_currency)
                    </li>
                    <li>
                        $email– user’s email address (x_email)
                    </li>
                    <li>
                        $number–credit card number (cc_number)
                    </li>
                    <li>
                        $cvv–credit card cvv (cc_cvv)
                    </li>
                    <li>
                        $month – credit card expiration month (cc_exp_month)
                    </li>
                    <li>
                        $year – credit card expiration year (cc_exp_year)
                    </li>
                    <li>
                        $cpf – user’s document (x_cpf)
                    </li>
                    <li>
                        $country – country code (x_country)
                    </li>
                    <li>
                        $token – credit card token (cc_token)
                    </li>
                </ul>


                If some of the above parameter is not sent in the request, they must not be
                considered for the control string.
                <div>
                    <div class="alert alert-info">
                        $message = $invoice.$amount.$currency.$email.$number.$month.$cvv.$year.$cpf.$country.$token;<br>
                        $control = strtoupper(hash_hmac('sha256', pack('A*', $message), pack('A*',$secretkey)));
                    </div>
                </div>

                <h3 class="block lighter"> Optional parameters </h3>

                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Format</th>
                            <th>Description</th>
                            <th>One-Shot / Recurrent </th>
                            <th>Example </th>
                            <th>Default</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>cc_installments</td>
                            <td>Number</td>
                            <td>Number of installments</td>
                            <td>One-Shot</td>
                            <td>3</td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>x_ip</td>
                            <td>String</td>
                            <td>Buyer's IP address</td>
                            <td>Both</td>
                            <td>200.11.222.3</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_confirm</td>
                            <td>String</td>
                            <td>To be provided if the
                                confirmation URL is different
                                from the confirmation URL
                                registered by the merchant. See <a href="#cc_x_confirm"> confirmation url</a></td>
                            <td>Both</td>
                            <td>http://merchant/confirm</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_bdate</td>
                            <td>String</td>
                            <td>User’s date of birth (Format: YYYYMMDD)</td>
                            <td>One-Shot</td>
                            <td>19850812</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_iduser</td>
                            <td>Decimal (max. 20 chars)</td>
                            <td>Unique user id at the merchant side</td>
                            <td>One-Shot</td>
                            <td>user 123</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_address</td>
                            <td>String</td>
                            <td>User’s address</td>
                            <td>One-Shot</td>
                            <td>1225 Bonavita St.</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_zip</td>
                            <td>String</td>
                            <td>User’s zip/postal code</td>
                            <td>One-Shot</td>
                            <td>11300</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_city</td>
                            <td>String</td>
                            <td>User’s city</td>
                            <td>One-Shot</td>
                            <td>Sao Paulo</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_state</td>
                            <td>String</td>
                            <td>User’s state. Brazilian 2 letter format</td>
                            <td>One-Shot</td>
                            <td>MO</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_phone</td>
                            <td>String</td>
                            <td>User’s phone number</td>
                            <td>One-Shot</td>
                            <td>099123456</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_merchant_id</td>
                            <td>String</td>
                            <td>Sub merchant identifier (only
                                for PSPs). List of sub-
                                merchants must be provided by
                                PSP</td>
                            <td>Both</td>
                            <td>1</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>


                <h2 id="cc_response" class=" block lighter">Response</h2>
                <div id="response"></div>
                This function, if successful, returns a json with the following parameters:
                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Description</th>
                            <th></th>
                    </thead>

                    <tbody>
                        <tr>
                            <td>status</td>
                            <td>OK</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>desc</td>
                            <td>Response description message</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>control</td>
                            <td>Control string</td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>

                        <tr>
                            <td>result</td>
                            <td>Transaction result. See <a href="#cc_results">possible results</a></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_invoice</td>
                            <td>Unique transaction ID number at the merchant</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_document</td>
                            <td>Unique transaction ID number at AstroPay. This information should be stored for future use.</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_currency</td>
                            <td>Currency code</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>x_amount_paid</td>
                            <td>The amount finally charged to the user, in local currency. It includes finance charges (if applies).</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>cc_descriptor</td>
                            <td>The transaction descriptor that will appear in the user’s statement</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <span class="badge badge-danger background-color-full-api">1</span>
                Control signature
                <ul>
                    <li>
                        $secretkey – secret key given to the merchant
                    </li>
                    <li>
                        $result – transaction result code
                    </li>
                    <li>
                        $amount – payment amount (x_amount)
                    </li>
                    <li>
                        $currency – payment currency (x_currency)
                    </li>
                    <li>
                        $invoice – unique transaction ID at merchant (x_invoice)
                    </li>
                    <li>
                        $document – unique transaction ID at AstroPay (x_document)
                    </li>
                </ul>    

                <div class="alert alert-info">
                    $message = $result . $currency . $amount . $invoice . $document;<br>
                    $control = strtoupper(hash_hmac('sha256', pack('A*', $message), pack('A*',$secretkey)));
                </div>


                <div class="well">
                    <h4 class="red smaller lighter"><i class="ace-icon fa fa-pencil"></i> Note</h4>
                    If transaction result is pending (7) it means it need to pass for a review process, and
                    it may take until 48 hours (working days) to get approved/rejected. If this is
                    unacceptable for your business, you can ask us to configure your account to
                    automatically decline any pending transaction, but this may decrease your
                    conversion rates.<br>
                    Finance charge for installments can be charged to customers or deducted from
                    merchant’s balance, depending on merchant’s preference.
                    <br>
                </div>
            </div>
            <!--Sale-->



            <!-- refunds -->
            <div id="cc_refund"> 
                <h1 class="header block lighter color-full-api blue">Function: Refund</h1>
                <p>
                    A Refund is the reversal of a credit card transaction, where the funds are taken from the
                    Merchant and given back to the Card Holder. A refund processing fee may apply. The
                    refund to the user in always performed is local currency
                </p>
                <p>
                    POST:
                    <br>
                    <i class="ace-icon fa fa-globe bigger-125 color-full-api"></i>
                    https://astropaycard.com/api_curl/cc/refund
                </p>
                <h2 id="cc_request" class=" block lighter"> Request </h2>
                <h3 class="block lighter"> Mandatory parameters </h3>
                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Format</th>
                            <th>Description</th>
                            <th>Example </th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>x_login</td>
                            <td>String (length: 32 chars)</td>
                            <td>Your merchant ID in Astropay platform</td>
                            <td>AsGsd35Grf</td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>

                        <tr>
                            <td>x_trans_key</td>
                            <td>String (length: 32 chars)</td>
                            <td>Your merchant password in Astropay platform </td>
                            <td>D23weF2f4g</td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>

                        <tr>
                            <td>x_version</td>
                            <td>String (format: X.Y)</td>
                            <td>API version</td>
                            <td>4.0</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_invoice</td>
                            <td>String (max. 20 chars)</td>
                            <td>Transaction identification (at Merchant site)</td>
                            <td>Invoice1234</td>
                            <td></td>
                        </tr>


                        <tr>
                            <td>x_document</td>
                            <td>String </td>
                            <td>Unique transaction Id Number
                                by AstroPay, returned in Sale
                                command</td>
                            <td>34587</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>control</td>
                            <td>String (length: 40 chars)</td>
                            <td>Control string calculated by you</td>
                            <td>4s5d4r42R5gJU23F45HQ1ad45Qdg3f5rTqF63g45</td>
                            <td><span class="badge badge-danger background-color-full-api">2</span></td>
                        </tr>

                    </tbody>
                </table>

                <p>
                    <span class="badge badge-danger background-color-full-api">1</span>
                    x_login and x_trans_key are your credentials. Remember to find them in the panel, section Integration -> Credentials & Settings.
                </p>
                <p>
                    <span class="badge badge-danger background-color-full-api">2</span>
                    Control string
                </p>
                <ul>
                    <li>
                        $secretkey – secret key given to the merchant
                    </li>
                    <li>
                        $invoice – unique transaction ID at merchant (x_invoice)
                    </li>
                    <li>
                        $document – unique transaction ID at AstroPay (x_document)
                    </li>
                    <li>
                        $amount – payment amount (x_amount, only present if parameter is sent)
                    </li>
                    <li>
                        $currency – payment currency (x_currency, only present if parameter is sent)
                    </li>
                </ul>    


                <div>
                    <div class="alert alert-info">
                        $message = $document . $invoice . $amount . $currency;<br>
                        $control = strtoupper(hash_hmac('sha256', pack('A*', $message), pack('A*',$secretkey)));
                    </div>
                </div>

                <h3 class="block lighter"> Optional parameters </h3>

                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Format</th>
                            <th>Description</th>
                            <th>Example </th>
                            <th>Default</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>x_amount</td>
                            <td>Decimal (max. 2 decimal numbers)</td>
                            <td>Amount to be refunded (in “x_currency”)
                                Must be equal or less than the captured amount.</td>
                            <td>100.95</td>
                            <td>Total captured amount</td>
                        </tr>

                        <tr>
                            <td>x_currency</td>
                            <td>String (length: 3 chars)</td>
                            <td>Transaction currency in ISO 4217. Mandatory if amount is present</td>
                            <td>EUR</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>

                <h2 id="cc_response" class=" block lighter">Response</h2>
                <div id="response"></div>

                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Description</th>
                            <th></th>
                    </thead>

                    <tbody>
                        <tr>
                            <td>Status</td>
                            <td>OK</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>desc</td>
                            <td>Response description message</td>
                            <td></td>
                        </tr>

                        <tr>
                            <td>control</td>
                            <td>Control string</td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>

                        <tr>
                            <td>result</td>
                            <td>Refund result. See <a href="#cc_results">possible results</a></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_invoice</td>
                            <td>Unique transaction ID number at the merchant</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_document</td>
                            <td>Unique transaction ID number at AstroPay</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_amount</td>
                            <td>The amount of the refund (same as request)</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_currency</td>
                            <td>The currency code (same as request)</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_amount_refunded</td>
                            <td>The refunded amount, in local currency</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_refund</td>
                            <td>Unique refund reference at AstroPay</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <span class="badge badge-danger background-color-full-api">1</span>
                Control signature
                <ul>
                    <li>
                        $secretkey – secret key given to the merchant
                    </li>
                    <li>
                        $result – refund result code
                    </li>
                    <li>
                        $amount –captured amount
                    </li>
                    <li>
                        $currency –currency code
                    </li>
                    <li>
                        $invoice – unique transaction ID at merchant
                    </li>
                    <li>
                        $document – unique transaction ID at AstroPay
                    </li>
                    <li>
                        $refund – unique refund reference at AstroPay
                    </li>
                </ul>    

                <div class="alert alert-info">
                    $message = $result . $invoice . $document . $amount . $currency . $refund
                    $control = strtoupper(hash_hmac('sha256', pack('A*', $message), pack('A*',$secretkey)));
                </div>
            </div>
            <!--refounds-->



            <!-- Query functions -->
            <div id="cc_query_functions"> 
                <h1 class="header block lighter color-full-api blue">Query Functions</h1>


                <!-- Payment status -->
                <div>
                    <h2 id="cc_request" class=" block lighter color-full-api"> Payment status </h2>
                    <p>
                        The status of a transaction can be verified
                    </p>
                    <p>
                        POST or GET:
                        <br>
                        <i class="ace-icon fa fa-globe bigger-125 color-full-api"></i>
                        https://astropaycard.com/api_curl/query/paystatus
                    </p>
                    <h3 id="cc_request" class=" block lighter"> Request </h3>
                    <h4 class="block lighter"> Mandatory parameters </h4>
                    <table id="simple-table" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Format</th>
                                <th>Description</th>
                                <th>Example </th>
                                <th></th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td>x_login</td>
                                <td>String (length: 32 chars)</td>
                                <td>Your merchant ID in Astropay platform</td>
                                <td>AsGsd35Grf</td>
                                <td><span class="badge badge-danger background-color-full-api">1</span></td>
                            </tr>

                            <tr>
                                <td>x_trans_key</td>
                                <td>String (length: 32 chars)</td>
                                <td>Your merchant password in Astropay platform </td>
                                <td>D23weF2f4g</td>
                                <td><span class="badge badge-danger background-color-full-api">1</span></td>
                            </tr>

                            <tr>
                                <td>x_version</td>
                                <td>String (format X.Y)</td>
                                <td>API version</td>
                                <td>4.0</td>
                                <td></td>
                            </tr>

                            <tr>
                                <td>x_invoice</td>
                                <td>String (max 20 chars)</td>
                                <td>The unique transaction ID at merchant site</td>
                                <td>EUR</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <p>
                        <span class="badge badge-danger background-color-full-api">1</span>
                        x_login and x_trans_key are your credentials. Remember to find them in the panel, section Integration -> Credentials & Settings.
                    </p>


                    <h3 id="cc_response" class=" block lighter">Response</h3>
                    <div id="response"></div>
                    <table id="simple-table" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                                <th></th>
                        </thead>

                        <tbody>
                            <tr>
                                <td>result</td>
                                <td>Transaction result. See <a href="#cc_results">possible results</a></td>
                                <td></td>
                            </tr>

                            <tr>
                                <td>x_iduser</td>
                                <td>User’s unique ID at the Merchant's side</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>x_invoice</td>
                                <td>Unique transaction ID number at Merchant's site</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>x_amount</td>
                                <td>Original transaction amount</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>PT</td>
                                <td>“0” for Production, “1” for Test</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Sign</td>
                                <td>Control string</td>
                                <td><span class="badge badge-danger background-color-full-api">1</span></td>
                            </tr>
                            <tr>
                                <td>x_document</td>
                                <td>Unique transaction ID number at AstroPay</td>
                                <td></td>
                            </tr> 
                            <tr>
                                <td>x_bank</td>
                                <td>Payment method code. See <a href="#cc_pm_codes">payment method codes</a></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>x_payment_type</td>
                                <td>Payment type code at AstroPay (always 03)</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>x_bank_name</td>
                                <td>Name of the payment method</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>x_currency</td>
                                <td>Transaction currency code</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                    <span class="badge badge-danger background-color-full-api">1</span>
                    Control signature
                    <ul>
                        <li>
                            $secretkey – secret key given to the merchant
                        </li>
                        <li>
                            $x_login – x_login given to the merchant (for status functions)
                        </li>
                        <li>
                            $result –transaction result
                        </li>
                        <li>
                            $amount –payment amount
                        </li>
                        <li>
                            $invoice – unique transaction ID at merchant
                        </li>
                    </ul>    

                    <div class="alert alert-info">
                        $message = $x_login . $result . $amount . $invoice
                        $control = strtoupper(hash_hmac('sha256', pack('A*', $message), pack('A*',$secretkey)));
                    </div>

                </div>
                <!-- Payment status -->

                <!-- Refund status -->
                <div>
                    <h2 id="cc_request" class=" block lighter color-full-api"> Refund status </h2>
                    <p>
                        The status of a transaction can be verified
                    </p>
                    <p>
                        POST or GET:
                        <br>
                        <i class="ace-icon fa fa-globe bigger-125 color-full-api"></i>
                        https://astropaycard.com/api_curl/query/refundstatus
                    </p>
                    <h3 id="cc_request" class=" block lighter"> Request </h3>
                    <h4 class="block lighter"> Mandatory parameters </h4>
                    <table id="simple-table" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Format</th>
                                <th>Description</th>
                                <th>Example </th>
                                <th></th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td>x_login</td>
                                <td>String (length: 32 chars)</td>
                                <td>Your merchant ID in Astropay platform</td>
                                <td>AsGsd35Grf</td>
                                <td><span class="badge badge-danger background-color-full-api">1</span></td>
                            </tr>

                            <tr>
                                <td>x_trans_key</td>
                                <td>String (length: 32 chars)</td>
                                <td>Your merchant password in Astropay platform </td>
                                <td>D23weF2f4g</td>
                                <td><span class="badge badge-danger background-color-full-api">1</span></td>
                            </tr>

                            <tr>
                                <td>x_refund</td>
                                <td>String (max. 20 chars)</td>
                                <td>The unique refund reference at AstroPay</td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <p>
                        <span class="badge badge-danger background-color-full-api">1</span>
                        x_login and x_trans_key are your credentials. Remember to find them in the panel, section Integration -> Credentials & Settings.
                    </p>


                    <h3 id="cc_response" class=" block lighter">Response</h3>
                    <div id="response"></div>
                    <table id="simple-table" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                        </thead>

                        <tbody>
                            <tr>
                                <td>result</td>
                                <td>Transaction result. See <a href="#cc_results">possible results</a></td>
                            </tr>
                            <tr>
                                <td>x_invoice</td>
                                <td>Unique transaction ID number at Merchant's site</td>
                            </tr>
                            <tr>
                                <td>x_document</td>
                                <td>Unique transaction ID number at AstroPay</td>
                            </tr> 
                        </tbody>
                    </table>

                </div>
                <!-- Refund status -->


                <!-- currency exchange status -->
                <div>
                    <h2 id="cc_request" class=" block lighter color-full-api"> Currency Exchange </h2>
                    <p>
                        The currency exchange rate can be verified
                    </p>
                    <p>
                        POST or GET:
                        <br>
                        <i class="ace-icon fa fa-globe bigger-125 color-full-api"></i>
                        https://astropaycard.com/api_curl/query/currencyexchange
                    </p>
                    <h3 id="cc_request" class=" block lighter"> Request </h3>
                    <h4 class="block lighter"> Mandatory parameters </h4>
                    TODO tabla mandatory, optional y control string.
                    <table id="simple-table" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Format</th>
                                <th>Description</th>
                                <th>Example </th>
                                <th></th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td>x_login</td>
                                <td>String (length: 32 chars)</td>
                                <td>Your merchant ID in Astropay platform</td>
                                <td>AsGsd35Grf</td>
                                <td><span class="badge badge-danger background-color-full-api">1</span></td>
                            </tr>

                            <tr>
                                <td>x_trans_key</td>
                                <td>String (length: 32 chars)</td>
                                <td>Your merchant password in Astropay platform </td>
                                <td>D23weF2f4g</td>
                                <td><span class="badge badge-danger background-color-full-api">1</span></td>
                            </tr>

                            <tr>
                                <td>x_country</td>
                                <td>String (2 chars)</td>
                                <td>The ISO code of the country whose
                                    currency exchange rate you want to
                                    know</td>
                                <td>BR</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                    <p>
                        <span class="badge badge-danger background-color-full-api">1</span>
                        x_login and x_trans_key are your credentials. Remember to find them in the panel, section Integration -> Credentials & Settings.
                    </p>


                    <h3 id="cc_response" class=" block lighter">Response</h3>
                    <div id="response"></div>
                    The response is a string with the price of 1 dollar in local currency.
                    If we don't have the currency for that country we will return 0.
                </div>
                <!-- Currency exchange status -->

                <!-- Installments status -->
                <div>
                    <h2 id="cc_request" class=" block lighter color-full-api"> Installments (only one-shot) </h2>
                    <p>
                        The possible number of installments for each amount and its associated rate can be verified.
                    </p>
                    <p>
                        POST:
                        <br>
                        <i class="ace-icon fa fa-globe bigger-125 color-full-api"></i>
                        https://astropaycard.com/api_curl/query/installments
                    </p>
                    <h3 id="cc_request" class=" block lighter"> Request </h3>
                    <h4 class="block lighter"> Mandatory parameters </h4>
                    <table id="simple-table" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Format</th>
                                <th>Description</th>
                                <th>Example </th>
                                <th></th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr>
                                <td>x_login</td>
                                <td>String (length: 32 chars)</td>
                                <td>Your merchant ID in Astropay platform</td>
                                <td>AsGsd35Grf</td>
                                <td><span class="badge badge-danger background-color-full-api">1</span></td>
                            </tr>

                            <tr>
                                <td>x_trans_key</td>
                                <td>String (length: 32 chars)</td>
                                <td>Your merchant password in Astropay platform </td>
                                <td>D23weF2f4g</td>
                                <td><span class="badge badge-danger background-color-full-api">1</span></td>
                            </tr>

                            <tr>
                                <td>x_country</td>
                                <td>String (2 chars)</td>
                                <td>The ISO code of the country whose
                                    currency exchange rate you want to
                                    know</td>
                                <td>BR</td>
                                <td></td>
                            </tr>

                            <tr>
                                <td>x_bank</td>
                                <td>String (max length: 3 chars)</td>
                                <td>Payment method code. See <a href="#cc_pm_codes">payment method codes</a></td>
                                <td>VI</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>cc_issuer</td>
                                <td>Number</td>
                                <td>Credit card issuer bank id(Mandatory only for Mexico). See <a href="#cc_issuer">issuer bank codes</a></td>
                                <td>120</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                    <p>
                        <span class="badge badge-danger background-color-full-api">1</span>
                        x_login and x_trans_key are your credentials. Remember to find them in the panel, section Integration -> Credentials & Settings.
                    </p>


                    <h3 id="cc_response" class=" block lighter">Response (array)</h3>
                    <div id="response"></div>
                    <table id="simple-table" class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Description</th>
                        </thead>

                        <tbody>
                            <tr>
                                <td>installments</td>
                                <td>Number of installments</td>
                            </tr>
                            <tr>
                                <td>installment_rate</td>
                                <td>Instalment rate (charged to customer)</td>
                            </tr>
                            <tr>
                                <td>min_allowed_amount</td>
                                <td>Minimum allowed amount (in local currency)</td>
                            </tr>
                        </tbody>
                    </table>


                </div>
                <!-- Installments status -->

            </div>
            <!-- Query functions -->

           

            <!-- Asynchronous notifications -->
            <div id="cc_async_notif"> 
                <h1 class="header block lighter color-full-api blue">Asynchronous notifications</h1>

                <h2 id="cc_request" class=" block lighter color-full-api"> Transaction notification </h2>
                <p>
                    The transaction status is usually final (Paid or Cancelled), but, some risky transactions need
                    to pass though a fraud review process before a final status is decided. For those pending
                    (7) transactions, the payment confirmation is sent asynchronously to the Merchant
                    confirmation URL (x_confirm) by POST protocol, sending the following parameters:
                </p>

                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Description</th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>result</td>
                            <td>Transaction result. See <a href="#cc_results">possible results</a> </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_invoice</td>
                            <td>Unique transaction ID number at the merchant</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_iduser</td>
                            <td>User’s unique ID at the merchant / account number</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_description</td>
                            <td>Transaction description</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_document</td>
                            <td>Unique transaction ID number at AstroPay</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_bank</td>
                            <td>Bank code</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_payment_type</td>
                            <td>Payment type (always 03)</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_bank_name</td>
                            <td>Payment method name</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_currency</td>
                            <td>Transaction currency in ISO 4217</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_control</td>
                            <td>Control string </td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>
                    </tbody>
                </table>
                <span class="badge badge-danger background-color-full-api">1</span>
                Control signature
                <ul>
                    <li>
                        $secretkey – secret key given to the merchant
                    </li>
                    <li>
                        $x_login – x_login given to the merchant
                    </li>
                    <li>
                        $result –transaction result
                    </li>
                    <li>
                        $amount –payment amount (x_amount)
                    </li>
                    <li>
                        $invoice – unique transaction ID at merchant (x_invoice)
                    </li>
                </ul>    

                <div class="alert alert-info">
                    $message = $x_login . $result . $amount . $invoice
                    $control = strtoupper(hash_hmac('sha256', pack('A*', $message), pack('A*',$secretkey)));
                </div>



                <h2 id="cc_request" class=" block lighter color-full-api"> Refund notification </h2>
                <p>
                    If a refund is pending (result = 0), the refund confirmation is sent asynchronously to the
                    previously registered Merchant refund confirmation URL by POST protocol, sending the
                    following parameters:
                </p>

                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Description</th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>result</td>
                            <td>Transaction result. See <a href="#cc_results">possible results</a> </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_refund</td>
                            <td>Unique refund reference number at AstroPay</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_invoice</td>
                            <td>Unique transaction ID number at the merchant</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_document</td>
                            <td>Unique transaction ID number at AstroPay</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_control</td>
                            <td>Control string </td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>
                    </tbody>
                </table>
                <span class="badge badge-danger background-color-full-api">1</span>
                Control signature
                <ul>
                    <li>
                        $secretkey – secret key given to the merchant
                    </li>
                    <li>
                        $result –transaction result
                    </li>
                    <li>
                        $refund – unique refund ID at AstroPay (x_refund)
                    </li>
                    <li>
                        $document – unique transaction ID at AstroPay (x_document)
                    </li>
                    <li>
                        $invoice – unique transaction ID at merchant (x_invoice)
                    </li>
                </ul>    

                <div class="alert alert-info">
                    $message = $refund . $result . $invoice . $document
                    $control = strtoupper(hash_hmac('sha256', pack('A*', $message), pack('A*',$secretkey)));
                </div>



                <h2 id="cc_request" class=" block lighter color-full-api"> Chargeback notification </h2>
                <p>
                    If a charge back was applied (requested by the user) a notification is sent to the merchant
                    to the previously registered Merchant refund confirmation URL by POST protocol, sending
                    the following parameters:
                </p>

                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Field</th>
                            <th>Description</th>
                            <th></th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>result</td>
                            <td>Transaction result. See <a href="#cc_results">possible results</a> </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_chargeback</td>
                            <td>Unique charback reference number at AstroPay</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_invoice</td>
                            <td>Unique transaction ID number at the merchant</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_document</td>
                            <td>Unique transaction ID number at AstroPay</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>x_control</td>
                            <td>Control string </td>
                            <td><span class="badge badge-danger background-color-full-api">1</span></td>
                        </tr>
                    </tbody>
                </table>
                <span class="badge badge-danger background-color-full-api">1</span>
                Control signature
                <ul>
                    <li>
                        $secretkey – secret key given to the merchant
                    </li>
                    <li>
                        $x_login – x_login given to the merchant
                    </li>
                    <li>
                        $result –transaction result
                    </li>
                    <li>
                        $chargeback – unique chargeback ID at AstroPay (x_chargeback)
                    </li>
                    <li>
                        $document – unique transaction ID at AstroPay (x_document)
                    </li>
                    <li>
                        $invoice – unique transaction ID at merchant (x_invoice)
                    </li>
                </ul>    

                <div class="alert alert-info">
                    $message = $result . $invoice . $document . $chargeback
                    $control = strtoupper(hash_hmac('sha256', pack('A*', $message), pack('A*',$secretkey)));
                </div>
            </div>
            <!-- Asynchronous notifications-->

            <!-- Errors -->
            <div id="cc_errors">
                <h1 class="header block lighter color-full-api blue">Errors</h1>
                <h2 id="cc_references">Format</h2>
                <div class="alert alert-info">
                    {
                    “status”:”ERROR”,
                    “desc”:”[Description of the error]”
                    “error_code”:”[Error code]”
                    }
                </div>



                <h2 id="cc_references">References</h2>

                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Code range</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>Syntax validation in parameter/s</td>
                            <td>3xx</td>
                        </tr>
                        <tr>
                            <td>Merchant identification validation </td>
                            <td>4xx</td>
                        </tr>
                        <tr>
                            <td>Business logic validation</td>
                            <td>5xx</td>
                        </tr>
                        <tr>
                            <td>Semantic validation in parameter/s</td>
                            <td>6xx</td>
                        </tr>
                        <tr>
                            <td>Transactional error</td>
                            <td>7xx</td>
                        </tr>
                        <tr>
                            <td>External transactional error</td>
                            <td>8xx</td>
                        </tr>
                    </tbody>
                </table>

                <h2 id="cc_codes" class=" block lighter">Codes</h2>
                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Error message</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>300</td>
                            <td>Invalid params + [param name]</td>
                        </tr>
                        <tr>
                            <td>301</td>
                            <td>Empty params + [param name]</td>
                        </tr>
                        <tr>
                            <td>302</td>
                            <td>Invalid control string</td>
                        </tr>
                        <tr>
                            <td>303</td>
                            <td>Invalid request</td>
                        </tr>

                        <tr>
                            <td>401</td>
                            <td>Invalid credentials</td>
                        </tr>
                        <tr>
                            <td>402</td>
                            <td>Unregistered IP address </td>
                        </tr>
                        <tr>
                            <td>403</td>
                            <td>Merchant has no authorization to use this API</td>
                        </tr>

                        <tr>
                            <td>501</td>
                            <td>The user must be adult</td>
                        </tr>
                        <tr>
                            <td>502</td>
                            <td>User unauthorized</td>
                        </tr>
                        <tr>
                            <td>504</td>
                            <td>User unauthorized due to cadastral situation</td>
                        </tr>
                        <tr>
                            <td>506</td>
                            <td>Payment method not found</td>
                        </tr>
                        <tr>
                            <td>507</td>
                            <td>Country not supported</td>
                        </tr>
                        <tr>
                            <td>508</td>
                            <td>User limit exceeded</td>
                        </tr>
                        <tr>
                            <td>510</td>
                            <td>Invalid transaction status</td>
                        </tr>
                        <tr>
                            <td>511</td>
                            <td>Amount exceeded</td>
                        </tr>
                        <tr>
                            <td>512</td>
                            <td>Email associated with another country</td>
                        </tr>

                        <tr>
                            <td>601</td>
                            <td>Currency not allowed for this country</td>
                        </tr>
                        <tr>
                            <td>603</td>
                            <td>Token not found or inactive</td>
                        </tr>
                        <tr>
                            <td>604</td>
                            <td>Credit card not found</td>
                        </tr>
                        <tr>
                            <td>605</td>
                            <td>Mismatch credit card – user data</td>
                        </tr>
                        <tr>
                            <td>606</td>
                            <td>Transaction not found</td>
                        </tr>
                        <tr>
                            <td>704</td>
                            <td>Could not process transaction</td>
                        </tr>
                        <tr>
                            <td>705</td>
                            <td>Could not communicate with acquirer</td>
                        </tr>

                        <tr>
                            <td>800</td>
                            <td>Rejected by bank</td>
                        </tr>
                        <tr>
                            <td>801</td>
                            <td>Pending for contingency</td>
                        </tr>
                        <tr>
                            <td>802</td>
                            <td>Rejected due to card blacklisted</td>
                        </tr>
                        <tr>
                            <td>803</td>
                            <td>Rejected due insufficient amount</td>
                        </tr>
                        <tr>
                            <td>804</td>
                            <td>Rejected due bad + [param name]</td>
                        </tr>
                        <tr>
                            <td>805</td>
                            <td>Rejected due max attempts reached</td>
                        </tr>
                        <tr>
                            <td>806</td>
                            <td>User must call bank for authorize</td>
                        </tr>
                        <tr>
                            <td>807</td>
                            <td>Rejected due duplicated payment</td>
                        </tr>
                        <tr>
                            <td>808</td>
                            <td>Rejected due credit card disabled</td>
                        </tr>
                        <tr>
                            <td>809</td>
                            <td>Rejected due score validation</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Errors -->

            <!-- result codes  -->
            <div id="cc_results">
                <h1 class="header block lighter color-full-api blue">Sale result codes</h1>
                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>code</th>
                            <th>Description</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>6</td>
                            <td>Invalid transaction</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>Transaction pending</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>Transaction rejected (final status)</td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td>Amount paid. Transaction successfully concluded (final status)</td>
                        </tr>
                    </tbody>
                </table>

                <h1 class="header block lighter color-full-api blue">Refund / chargeback result codes</h1>
                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>code</th>
                            <th>Description</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>0</td>
                            <td>Refund / chargeback pending</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>Amount refunded/ chargeback successfully (final status)</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Refund rejected or failed</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Refund/chargeback cancelled / reimbursed (final status)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- result codes -->

            <!-- Payment method codes  -->
            <div id="cc_pm_codes">
                <h1 class="header block lighter color-full-api blue">Payment method codes</h1>
                <p id="cc_references">The payment method codes (x_bank) are shown below:</p>
                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>code</th>
                            <th>Description</th>
                            <th>Countries</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>VI</td>
                            <td>Visa</td>
                            <td>BR, MX, CO</td>
                        </tr>
                        <tr>
                            <td>MC</td>
                            <td>Mastercard</td>
                            <td>BR, MX, CO, AR</td>
                        </tr>
                        <tr>
                            <td>EL</td>
                            <td>Elo</td>
                            <td>BR</td>
                        </tr>
                        <tr>
                            <td>HI</td>
                            <td>Hipercard</td>
                            <td>BR</td>
                        </tr>
                        <tr>
                            <td>DC</td>
                            <td>Diners</td>
                            <td>BR, CO</td>
                        </tr>
                        <tr>
                            <td>AE</td>
                            <td>American express</td>
                            <td>BR, CO, AR</td>
                        </tr>
                        <tr>
                            <td>ML</td>
                            <td>Cartao MercadLivre</td>
                            <td>BR</td>
                        </tr>
                        <tr>
                            <td>VD</td>
                            <td>Visa debit</td>
                            <td>MX</td>
                        </tr>
                        <tr>
                            <td>MD</td>
                            <td>Mastercard Debit</td>
                            <td>MX</td>
                        </tr>
                        <tr>
                            <td>NJ</td>
                            <td>Naranja</td>
                            <td>AR</td>
                        </tr>
                        <tr>
                            <td>NT</td>
                            <td>Nativa Master Card</td>
                            <td>AR</td>
                        </tr>
                        <tr>
                            <td>TS</td>
                            <td>Tarjeta Shopping</td>
                            <td>AR</td>
                        </tr>
                        <tr>
                            <td>CS</td>
                            <td>Cencosud</td>
                            <td>AR</td>
                        </tr>
                        <tr>
                            <td>CL</td>
                            <td>Cabal</td>
                            <td>AR</td>
                        </tr>
                        <tr>
                            <td>AG</td>
                            <td>Argencard</td>
                            <td>AR</td>
                        </tr>

                    </tbody>
                </table>
            </div>
            <!-- payment method codes -->

            <!-- Issuer bank codes  -->
            <div id="cc_issuer_banks">
                <h1 class="header block lighter color-full-api blue">Issuer Bank codes</h1>
                <p id="cc_references">The issuer bank codes (x_bank) for Mexico are shown below:</p>
                <table id="simple-table" class="table table-striped table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>code</th>
                            <th>Description</th>
                            <th>Payment method</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>163</td>
                            <td>Banorte</td>
                            <td>VI, MC</td>
                        </tr>
                        <tr>
                            <td>164</td>
                            <td>HSBC</td>
                            <td>VI, MC, VD, MD</td>
                        </tr>
                        <tr>
                            <td>165</td>
                            <td>Scotiabank</td>
                            <td>VI, MC</td>
                        </tr>
                        <tr>
                            <td>160</td>
                            <td>Santander</td>
                            <td>VI, MC, VD, MD</td>
                        </tr>
                        <tr>
                            <td>1023</td>
                            <td>Inbursa</td>
                            <td>VI, MC</td>
                        </tr>
                        <tr>
                            <td>1020</td>
                            <td>Ixe</td>
                            <td>VI, MC</td>
                        </tr>
                        <tr>
                            <td>1021</td>
                            <td>Bajio</td>
                            <td>VI, MC</td>
                        </tr>
                        <tr>
                            <td>1024</td>
                            <td>Mifel</td>
                            <td>VI, MC</td>
                        </tr>
                        <tr>
                            <td>1018</td>
                            <td>Banco Ahorro Famsa</td>
                            <td>VI, MC</td>
                        </tr>
                        <tr>
                            <td>1022</td>
                            <td>Banregio</td>
                            <td>VI, MC</td>
                        </tr>
                        <tr>
                            <td>1019</td>
                            <td>Invex</td>
                            <td>VI, MC</td>
                        </tr>
                        <tr>
                            <td>1017</td>
                            <td>Afirme</td>
                            <td>VI, MC</td>
                        </tr>
                        <tr>
                            <td>158</td>
                            <td>Bancomer</td>
                            <td>VI, MC, VD</td>
                        </tr>
                        <tr>
                            <td>159</td>
                            <td>Banamex</td>
                            <td>VI, MC, VD, MD</td>
                        </tr>
                        <tr>
                            <td>162</td>
                            <td>Other</td>
                            <td>VI, MC</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Issuer Bank codes -->

             <!-- Device ID -->
            <div id="cc_x_device_id"> 
                <h1 class="header block lighter color-full-api blue">Device ID</h1>
                <div class="well">
                    <h4 class="red smaller lighter"><i class="ace-icon fa fa-pencil"></i> Note</h4>
                    This parameter is the input for our risk management algorithms, and it is very important to
                    collect it in order to improve conversion rates and minimize chargebacks.
                    <br>
                </div>

                <p>
                    To obtain the x_device_id (unique identifier of the computer where the payment is
                    originated) it is necessary to display the following HTML to the customer. Typically this html
                    can be added to the bottom of the same page that is used to collect the card number.
                </p>
                <div class="alert alert-info">
                    &lt;html&gt; <br>
                    &nbsp; &nbsp;   &lt;body&gt;<br>
                    &nbsp; &nbsp; &nbsp; &nbsp;     //DeviceId is available when the transaction is submitted. Could also be placed in a hidden input var<br>
                    &nbsp; &nbsp; &nbsp; &nbsp;    &lt;form&gt;<br>
                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;        &lt;input type='hidden' id='deviceId' name='deviceId'/&gt;<br>
                    &nbsp; &nbsp; &nbsp; &nbsp;   &lt;/form&gt;<br>
                    &nbsp; &nbsp; &nbsp; &nbsp;    &lt;script src="https://astropaycard.com/js/device_collector.js"&gt;<br>
                    &nbsp; &nbsp; &nbsp; &nbsp;    &lt;/script&gt;<br>
                    &nbsp; &nbsp;    &lt;/body&gt;<br>
                    &nbsp; &nbsp; &lt;/html&gt;<br>
                </div>
            </div>
            <!-- Device ID -->
            
            <!-- Testing  -->
            <div>
                <h1 class="header block lighter color-full-api blue">Testing</h1>
                <h4 id="testing">Use the following test cards in Sandbox</h4>
                Visa ended in 1111 : preapproval (save) authorized, future payments (sale) authorized<br>
                Master ended in 2222 :  preapproval (save) authorized, future payments (sale) authorized<br>
                Visa ended in 3333 :  preapproval (save) authorized, future payments (sale) rejected with desc: cc_rejected_other_reason (generic rejection cause) <br>
                Master ended in 4444 : preapproval (save) authorized, future payments (sale) rejected with desc: cc_rejected_blacklist (hard rejection)<br>
                Visa ended in 5555 : preapproval (save) rejected with desc: cc_rejected_call_for_authorize (user should call his bank and then try again...)<br>
                Master ended in 6666 : preapproval (save) rejected with desc:cc_rejected_other_reason (generic rejection cause)<br>
                Visa ended in 7777 : preapproval (save) rejected with desc: pending_form_bad_filled_card_number (user should check his data and try again)<br>
                Master ended in 8888 :  preapproval (save) authorized, future payments (sale) pending, payment approved 24 hours later.<br>
            </div>
            <!-- Testing -->



        </div>
    </body>
</html>
